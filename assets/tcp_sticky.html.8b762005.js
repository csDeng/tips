import{_ as r,r as c,o as i,c as k,b as n,a,w as e,F as b,d as s,e as p}from"./app.2a7ffa2e.js";var m="/assets/image-20220425235831869.0f49b8fd.png",d="/assets/1614350-20210205104048500-834041207.4f830ce3.png";const f={},g={class:"table-of-contents"},h=s("TCP\u7C98\u5305"),_=s("\u4E3A\u4EC0\u4E48\u4F1A\u51FA\u73B0\u7C98\u5305"),w=s("\u7C98\u5305\u7684\u672C\u8D28"),y=s("\u89E3\u51B3\u529E\u6CD5"),H=s("\u57FA\u4E8E\u957F\u5EA6\u524D\u7F00\u8FDB\u884C\u5C01\u5305\u3002"),C=s("\u6269\u5C55"),v=s("\u5EF6\u65F6 ACK \u4E0E Nagle \u7B97\u6CD5\u7ED3\u5408"),P=n("h1",{id:"tcp\u7C98\u5305",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#tcp\u7C98\u5305","aria-hidden":"true"},"#"),s(" TCP\u7C98\u5305")],-1),T={class:"custom-container tip"},x=n("p",{class:"custom-container-title"},"\u4E3B\u8981\u53C2\u8003",-1),N={href:"https://datatracker.ietf.org/doc/html/rfc896",target:"_blank",rel:"noopener noreferrer"},A=s("RFC 896 - IP/TCP \u4E92\u8054\u7F51\u7EDC\u4E2D\u7684\u62E5\u585E\u63A7\u5236 (ietf.org)"),I={href:"http://rfc.ac.cn/cn/rfc896.txt",target:"_blank",rel:"noopener noreferrer"},R=s("\u7FFB\u8BD1\u7248\uFF1Arfc.ac.cn/cn/rfc896.txt"),B={href:"https://www.liwenzhou.com/posts/Go/15_socket/#autoid-2-2-3",target:"_blank",rel:"noopener noreferrer"},q=s("Go\u8BED\u8A00\u57FA\u7840\u4E4B\u7F51\u7EDC\u7F16\u7A0B | \u674E\u6587\u5468\u7684\u535A\u5BA2 (liwenzhou.com)"),K={href:"https://www.cnblogs.com/jojop/p/14376423.html",target:"_blank",rel:"noopener noreferrer"},E=s("\u3010TCP/IP\u3011Nagle \u7B97\u6CD5\u4EE5\u53CA\u6240\u8C13 TCP \u7C98\u5305 - \u5468\u4E8C\u9E2D - \u535A\u5BA2\u56ED (cnblogs.com)"),F=n("p",null,"\u4EC0\u4E48\u662F\u7C98\u5305\u5462\uFF0C\u8BB2\u4EBA\u8BDD\u5C31\u662F\uFF0C\u672C\u6765\u5E94\u8BE5\u5206\u5F00\u7684\u4E1C\u897F\uFF0C\u8FDE\u5728\u4E86\u4E00\u8D77\u3002",-1),L=n("p",null,[n("code",null,"talk is cheap, show me the code and the answer"),s(".")],-1),D=n("div",{class:"language-go ext-go line-numbers-mode"},[n("pre",{class:"language-go"},[n("code",null,[n("span",{class:"token keyword"},"package"),s(` main

`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"("),s(`
	`),n("span",{class:"token string"},'"bufio"'),s(`
	`),n("span",{class:"token string"},'"fmt"'),s(`
	`),n("span",{class:"token string"},'"io"'),s(`
	`),n("span",{class:"token string"},'"net"'),s(`
`),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token keyword"},"func"),s(),n("span",{class:"token function"},"process"),n("span",{class:"token punctuation"},"("),s("conn net"),n("span",{class:"token punctuation"},"."),s("Conn"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
	`),n("span",{class:"token keyword"},"defer"),s(" conn"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Close"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
	reader `),n("span",{class:"token operator"},":="),s(" bufio"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"NewReader"),n("span",{class:"token punctuation"},"("),s("conn"),n("span",{class:"token punctuation"},")"),s(`
	`),n("span",{class:"token keyword"},"var"),s(" buf "),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"1024"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token builtin"},"byte"),s(`
	`),n("span",{class:"token keyword"},"for"),s(),n("span",{class:"token punctuation"},"{"),s(`
		n`),n("span",{class:"token punctuation"},","),s(" err "),n("span",{class:"token operator"},":="),s(" reader"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Read"),n("span",{class:"token punctuation"},"("),s("buf"),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),s(`
		`),n("span",{class:"token keyword"},"if"),s(" err "),n("span",{class:"token operator"},"=="),s(" io"),n("span",{class:"token punctuation"},"."),s("EOF "),n("span",{class:"token punctuation"},"{"),s(`
			`),n("span",{class:"token keyword"},"break"),s(`
		`),n("span",{class:"token punctuation"},"}"),s(`
		`),n("span",{class:"token keyword"},"if"),s(" err "),n("span",{class:"token operator"},"!="),s(),n("span",{class:"token boolean"},"nil"),s(),n("span",{class:"token punctuation"},"{"),s(`
			fmt`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Println"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"read from client failed, err:"'),n("span",{class:"token punctuation"},","),s(" err"),n("span",{class:"token punctuation"},")"),s(`
			`),n("span",{class:"token keyword"},"break"),s(`
		`),n("span",{class:"token punctuation"},"}"),s(`
		recvStr `),n("span",{class:"token operator"},":="),s(),n("span",{class:"token function"},"string"),n("span",{class:"token punctuation"},"("),s("buf"),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},":"),s("n"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),s(`
		fmt`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Println"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"\u6536\u5230client\u53D1\u6765\u7684\u6570\u636E\uFF1A"'),n("span",{class:"token punctuation"},","),s(" recvStr"),n("span",{class:"token punctuation"},")"),s(`
	`),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"func"),s(),n("span",{class:"token function"},"main"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
	listen`),n("span",{class:"token punctuation"},","),s(" err "),n("span",{class:"token operator"},":="),s(" net"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Listen"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"tcp"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"127.0.0.1:30000"'),n("span",{class:"token punctuation"},")"),s(`
	`),n("span",{class:"token keyword"},"if"),s(" err "),n("span",{class:"token operator"},"!="),s(),n("span",{class:"token boolean"},"nil"),s(),n("span",{class:"token punctuation"},"{"),s(`
		fmt`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Println"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"listen failed, err:"'),n("span",{class:"token punctuation"},","),s(" err"),n("span",{class:"token punctuation"},")"),s(`
		`),n("span",{class:"token keyword"},"return"),s(`
	`),n("span",{class:"token punctuation"},"}"),s(`
	`),n("span",{class:"token keyword"},"defer"),s(" listen"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Close"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
	`),n("span",{class:"token keyword"},"for"),s(),n("span",{class:"token punctuation"},"{"),s(`
		conn`),n("span",{class:"token punctuation"},","),s(" err "),n("span",{class:"token operator"},":="),s(" listen"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Accept"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
		`),n("span",{class:"token keyword"},"if"),s(" err "),n("span",{class:"token operator"},"!="),s(),n("span",{class:"token boolean"},"nil"),s(),n("span",{class:"token punctuation"},"{"),s(`
			fmt`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Println"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"accept failed, err:"'),n("span",{class:"token punctuation"},","),s(" err"),n("span",{class:"token punctuation"},")"),s(`
			`),n("span",{class:"token keyword"},"continue"),s(`
		`),n("span",{class:"token punctuation"},"}"),s(`
		`),n("span",{class:"token keyword"},"go"),s(),n("span",{class:"token function"},"process"),n("span",{class:"token punctuation"},"("),s("conn"),n("span",{class:"token punctuation"},")"),s(`
	`),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br"),n("span",{class:"line-number"},"41"),n("br"),n("span",{class:"line-number"},"42"),n("br"),n("span",{class:"line-number"},"43"),n("br"),n("span",{class:"line-number"},"44"),n("br")])],-1),G=n("div",{class:"language-go ext-go line-numbers-mode"},[n("pre",{class:"language-go"},[n("code",null,[n("span",{class:"token keyword"},"package"),s(` main

`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"("),s(`
	`),n("span",{class:"token string"},'"fmt"'),s(`
	`),n("span",{class:"token string"},'"net"'),s(`
	`),n("span",{class:"token string"},'"time"'),s(`
`),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token keyword"},"func"),s(),n("span",{class:"token function"},"main"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
	conn`),n("span",{class:"token punctuation"},","),s(" err "),n("span",{class:"token operator"},":="),s(" net"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Dial"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"tcp"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"127.0.0.1:30000"'),n("span",{class:"token punctuation"},")"),s(`
	`),n("span",{class:"token keyword"},"if"),s(" err "),n("span",{class:"token operator"},"!="),s(),n("span",{class:"token boolean"},"nil"),s(),n("span",{class:"token punctuation"},"{"),s(`
		fmt`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Println"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"dial failed, err"'),n("span",{class:"token punctuation"},","),s(" err"),n("span",{class:"token punctuation"},")"),s(`
		`),n("span",{class:"token keyword"},"return"),s(`
	`),n("span",{class:"token punctuation"},"}"),s(`
	`),n("span",{class:"token keyword"},"defer"),s(" conn"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Close"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
	`),n("span",{class:"token keyword"},"for"),s(" i "),n("span",{class:"token operator"},":="),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},";"),s(" i "),n("span",{class:"token operator"},"<"),s(),n("span",{class:"token number"},"20"),n("span",{class:"token punctuation"},";"),s(" i"),n("span",{class:"token operator"},"++"),s(),n("span",{class:"token punctuation"},"{"),s(`
		msg `),n("span",{class:"token operator"},":="),s(),n("span",{class:"token string"},"`Hello, Hello. How are you?`"),s(`
		conn`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Write"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]"),n("span",{class:"token function"},"byte"),n("span",{class:"token punctuation"},"("),s("msg"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
	`),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br")])],-1),W=p(`<details class="custom-container details"><summary>\u67E5\u770B\u7B54\u6848\u4E4B\u524D\u53EF\u4EE5\u5148\u60F3\u4E00\u4E0B\u4F1A\u8F93\u51FA\u4EC0\u4E48</summary><p>\u5C06\u4E0A\u9762\u7684\u4EE3\u7801\u4FDD\u5B58\u540E\uFF0C\u5206\u522B\u7F16\u8BD1\u3002\u5148\u542F\u52A8\u670D\u52A1\u7AEF\u518D\u542F\u52A8\u5BA2\u6237\u7AEF\uFF0C\u53EF\u4EE5\u770B\u5230\u670D\u52A1\u7AEF\u8F93\u51FA\u7ED3\u679C\u5982\u4E0B\uFF1A</p><blockquote><p>\u6BCF\u4E2A\u4EBA\u7684\u7ED3\u679C\u90FD\u4E0D\u4E00\u6837\uFF0C\u53D6\u51B3\u4E8E<code>io</code>\u7684\u901F\u5EA6\u3002</p></blockquote><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>\u6536\u5230client\u53D1\u6765\u7684\u6570\u636E\uFF1A Hello<span class="token punctuation">,</span> Hello<span class="token punctuation">.</span> How are you?Hello<span class="token punctuation">,</span> Hello<span class="token punctuation">.</span> How are you?Hello<span class="token punctuation">,</span> Hello<span class="token punctuation">.</span> How are you?Hello<span class="token punctuation">,</span> Hello<span class="token punctuation">.</span> How are you?Hello<span class="token punctuation">,</span> Hello<span class="token punctuation">.</span> How are you?Hello<span class="token punctuation">,</span> Hello<span class="token punctuation">.</span> How are you?Hello<span class="token punctuation">,</span> Hello<span class="token punctuation">.</span> How are you?Hello<span class="token punctuation">,</span> Hello<span class="token punctuation">.</span> How are you?Hello<span class="token punctuation">,</span> Hello<span class="token punctuation">.</span> How are you?Hello<span class="token punctuation">,</span> Hello<span class="token punctuation">.</span> How are you?Hello<span class="token punctuation">,</span> Hello<span class="token punctuation">.</span> How are you?Hello<span class="token punctuation">,</span> Hello<span class="token punctuation">.</span> How are you?Hello<span class="token punctuation">,</span> Hello<span class="token punctuation">.</span> How are you?Hello<span class="token punctuation">,</span> Hello<span class="token punctuation">.</span> How are you?
\u6536\u5230client\u53D1\u6765\u7684\u6570\u636E\uFF1A Hello<span class="token punctuation">,</span> Hello<span class="token punctuation">.</span> How are you?Hello<span class="token punctuation">,</span> Hello<span class="token punctuation">.</span> How are you?Hello<span class="token punctuation">,</span> Hello<span class="token punctuation">.</span> How are you?Hello<span class="token punctuation">,</span> Hello<span class="token punctuation">.</span> How are you?Hello<span class="token punctuation">,</span> Hello<span class="token punctuation">.</span> How are you?Hello<span class="token punctuation">,</span> Hello<span class="token punctuation">.</span> How are you?
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>\u5BA2\u6237\u7AEF\u520620\u6B21\u53D1\u9001\u7684\u6570\u636E\uFF0C\u5728\u670D\u52A1\u7AEF\u5E76\u6CA1\u6709\u6210\u529F\u7684\u8F93\u51FA20\u6B21\uFF0C\u800C\u662F\u591A\u6761\u6570\u636E\u201C\u7C98\u201D\u5230\u4E86\u4E00\u8D77\u3002</p><ul><li>\u90A3\u4E48\u600E\u4E48\u8BA9\u670D\u52A1\u7AEF\u8F93\u51FA20\u6761\u4FE1\u606F\u5462\uFF1F</li></ul><p>\u9996\u5148\u6700\u7C97\u66B4\u7684\u89E3\u51B3\u529E\u6CD5\uFF0C\u5C31\u662F\u7ED9\u5BA2\u6237\u7AEF\u52A0\u4E0A\u5EF6\u65F6\uFF0C\u907F\u514Dtcp\u7684\u6570\u636E\u5305\u7C98\u8FDE\u3002</p><p>\u4F8B\u5982\u52A0\u4E2A<code>1us</code>,\u5F53\u7136\u65F6\u95F4\u8FD8\u53EF\u4EE5\u662F\u5176\u4ED6\u3002</p><p><img src="`+m+'" alt="image-20220425235831869"></p></details><h2 id="\u4E3A\u4EC0\u4E48\u4F1A\u51FA\u73B0\u7C98\u5305" tabindex="-1"><a class="header-anchor" href="#\u4E3A\u4EC0\u4E48\u4F1A\u51FA\u73B0\u7C98\u5305" aria-hidden="true">#</a> \u4E3A\u4EC0\u4E48\u4F1A\u51FA\u73B0\u7C98\u5305</h2><p>\u4E3B\u8981\u539F\u56E0\u5C31\u662Ftcp\u6570\u636E\u4F20\u9012\u6A21\u5F0F\u662F\u6D41\u6A21\u5F0F\uFF0C\u5728\u4FDD\u6301\u957F\u8FDE\u63A5\u7684\u65F6\u5019\u53EF\u4EE5\u8FDB\u884C\u591A\u6B21\u7684\u6536\u548C\u53D1\u3002</p><p>\u201C\u7C98\u5305\u201D\u53EF\u53D1\u751F\u5728\u53D1\u9001\u7AEF\u4E5F\u53EF\u53D1\u751F\u5728\u63A5\u6536\u7AEF\uFF1A</p><ol><li>\u7531Nagle\u7B97\u6CD5\u9020\u6210\u7684\u53D1\u9001\u7AEF\u7684\u7C98\u5305\uFF1ANagle\u7B97\u6CD5\u662F\u4E00\u79CD\u6539\u5584\u7F51\u7EDC\u4F20\u8F93\u6548\u7387\u7684\u7B97\u6CD5\u3002\u7B80\u5355\u6765\u8BF4\u5C31\u662F\u5F53\u6211\u4EEC\u63D0\u4EA4\u4E00\u6BB5\u6570\u636E\u7ED9TCP\u53D1\u9001\u65F6\uFF0CTCP\u5E76\u4E0D\u7ACB\u523B\u53D1\u9001\u6B64\u6BB5\u6570\u636E\uFF0C\u800C\u662F\u7B49\u5F85\u4E00\u5C0F\u6BB5\u65F6\u95F4\u770B\u770B\u5728\u7B49\u5F85\u671F\u95F4\u662F\u5426\u8FD8\u6709\u8981\u53D1\u9001\u7684\u6570\u636E\uFF0C\u82E5\u6709\u5219\u4F1A\u4E00\u6B21\u628A\u8FD9\u4E24\u6BB5\u6570\u636E\u53D1\u9001\u51FA\u53BB\u3002</li><li>\u63A5\u6536\u7AEF\u63A5\u6536\u4E0D\u53CA\u65F6\u9020\u6210\u7684\u63A5\u6536\u7AEF\u7C98\u5305\uFF1ATCP\u4F1A\u628A\u63A5\u6536\u5230\u7684\u6570\u636E\u5B58\u5728\u81EA\u5DF1\u7684\u7F13\u51B2\u533A\u4E2D\uFF0C\u7136\u540E\u901A\u77E5\u5E94\u7528\u5C42\u53D6\u6570\u636E\u3002\u5F53\u5E94\u7528\u5C42\u7531\u4E8E\u67D0\u4E9B\u539F\u56E0\u4E0D\u80FD\u53CA\u65F6\u7684\u628ATCP\u7684\u6570\u636E\u53D6\u51FA\u6765\uFF0C\u5C31\u4F1A\u9020\u6210TCP\u7F13\u51B2\u533A\u4E2D\u5B58\u653E\u4E86\u51E0\u6BB5\u6570\u636E\u3002</li></ol>',5),S={class:"custom-container details"},V=n("summary",null,"Nagle\u7B97\u6CD5",-1),z=n("ul",null,[n("li",null,"wiki")],-1),O=n("strong",null,"Nagle's algorithm",-1),j=s(" is a means of improving the efficiency of "),J={href:"https://en.wikipedia.org/wiki/TCP/IP",target:"_blank",rel:"noopener noreferrer"},U=s("TCP/IP"),M=s(" networks by reducing the number of packets that need to be sent over the network. It was defined by John Nagle while working for "),Q={href:"https://en.wikipedia.org/wiki/Ford_Aerospace",target:"_blank",rel:"noopener noreferrer"},X=s("Ford Aerospace"),Y=s(". It was published in 1984 as a "),Z={href:"https://en.wikipedia.org/wiki/Request_for_Comments",target:"_blank",rel:"noopener noreferrer"},$=s("Request for Comments"),nn=s(" (RFC) with title "),sn=n("em",null,"Congestion Control in IP/TCP Internetworks",-1),an=s(" in "),tn={href:"https://en.wikipedia.org/wiki/RFC_(identifier)",target:"_blank",rel:"noopener noreferrer"},en=s("RFC"),on=s(),ln={href:"https://datatracker.ietf.org/doc/html/rfc896",target:"_blank",rel:"noopener noreferrer"},cn=s("896"),pn=s("."),un=s('The RFC describes what he called the "small-packet problem", where an application repeatedly emits data in small chunks, frequently only 1 '),rn={href:"https://en.wikipedia.org/wiki/Byte",target:"_blank",rel:"noopener noreferrer"},kn=s("byte"),bn=s(" in size. Since "),mn={href:"https://en.wikipedia.org/wiki/Transmission_Control_Protocol",target:"_blank",rel:"noopener noreferrer"},dn=s("TCP"),fn=s(" packets have a 40-byte header (20 bytes for TCP, 20 bytes for "),gn={href:"https://en.wikipedia.org/wiki/IPv4",target:"_blank",rel:"noopener noreferrer"},hn=s("IPv4"),_n=s("), this results in a 41-byte packet for 1 byte of useful information, a huge overhead. This situation often occurs in "),wn={href:"https://en.wikipedia.org/wiki/Telnet",target:"_blank",rel:"noopener noreferrer"},yn=s("Telnet"),Hn=s(" sessions, where most keypresses generate a single byte of data that is transmitted immediately. Worse, over slow links, many such packets can be in transit at the same time, potentially leading to "),Cn={href:"https://en.wikipedia.org/wiki/Congestion_collapse",target:"_blank",rel:"noopener noreferrer"},vn=s("congestion collapse"),Pn=s("."),Tn=n("blockquote",null,[n("p",null,"Nagle's algorithm works by combining a number of small outgoing messages and sending them all at once. Specifically, as long as there is a sent packet for which the sender has received no acknowledgment, the sender should keep buffering its output until it has a full packet's worth of output, thus allowing output to be sent all at once.")],-1),xn=n("ul",null,[n("li",null,"\u603B\u7684\u6765\u8BF4\uFF0C\u5C31\u662F\u4E00\u79CD\u51CF\u5C11\u5728\u5E7F\u57DF\u7F51\u4F20\u8F93\u7684\u6570\u636E\u5305\u7684\u4E00\u79CD\u65B9\u6CD5\u3002")],-1),Nn=p('<h2 id="\u7C98\u5305\u7684\u672C\u8D28" tabindex="-1"><a class="header-anchor" href="#\u7C98\u5305\u7684\u672C\u8D28" aria-hidden="true">#</a> \u7C98\u5305\u7684\u672C\u8D28</h2><p>\u4ECE\u4E0A\u9762\u7ED3\u679C\u6211\u4EEC\u4E5F\u770B\u5230\u4E86\uFF0C\u4E0A\u5C42\u901A\u8FC7 TCP \u4F20\u9012\u7684\u6570\u636E\u597D\u50CF\u88AB\u80F6\u6C34\u9ECF\u5728\u4E86\u4E00\u8D77\uFF0C\u6240\u4EE5\u6709\u4E86\u6240\u8C13\u7684 TCP \u7C98\u5305\u95EE\u9898\u3002\u4F46\u662F\u5728\u8FD9\u91CC\u6211\u4EEC\u9700\u8981\u7EA0\u6B63\u7684\u4E00\u4E2A\u70B9\u662F\uFF1ATCP \u662F\u6D41\u534F\u8BAE\uFF0C\u6839\u672C\u4E0D\u5B58\u5728\u6240\u8C13\u7684\u7C98\u5305\u4E00\u8BF4\u3002</p><blockquote><p>send(2) Upon successful completion, the number of types which were send is returned.</p><p>Otherwise, -1 is returned and the global variable errno is set to indicate the error.</p><p>recv(2) These calls return the number of bytes received, or -1 if an error occurred.</p></blockquote><p>\u6587\u6863\u4E2D\u5DF2\u63D0\u53CA\uFF1A<code>send</code> \u548C <code>recv</code> \u7684\u8FD4\u56DE\u503C\u8868\u793A\u6210\u529F\u53D1\u9001/\u63A5\u6536\u7AEF\u5B57\u8282\u6570\u3002\u6240\u4EE5\u5BF9\u4E8E\u5E94\u7528\u5C42\u6765\u8BF4\uFF0C\u9ECF\u5305\u786E\u5B9E\u662F\u4E2A\u4F2A\u547D\u9898\uFF0CTCP \u672C\u6765\u5C31\u662F\u4E00\u4E2A\u57FA\u4E8E\u5B57\u8282\u6D41\u7684\u534F\u8BAE\u800C\u4E0D\u662F\u6D88\u606F\u5305\u7684\u534F\u8BAE\uFF0C\u5B83\u53EA\u4F1A\u5C06\u4F60\u7684\u6570\u636E\u7F16\u7A0B\u5B57\u8282\u6D41\u53D1\u5230\u5BF9\u9762\u53BB\uFF0C\u800C\u4E14\u4FDD\u8BC1\u987A\u5E8F\u4E0D\u4F1A\u4E71\uFF0C\u800C\u5BF9\u4E8E\u5B57\u8282\u6D41\u7684\u89E3\u6790\uFF0C\u5C31\u9700\u8981\u6211\u4EEC\u81EA\u5DF1\u6765\u641E\u5B9A\u4E86\u3002</p><h2 id="\u89E3\u51B3\u529E\u6CD5" tabindex="-1"><a class="header-anchor" href="#\u89E3\u51B3\u529E\u6CD5" aria-hidden="true">#</a> \u89E3\u51B3\u529E\u6CD5</h2><p>\u89E3\u51B3\u9ECF\u5305\u95EE\u9898\u7684\u6700\u5173\u952E\u4E00\u6B65\u5C31\u662F<strong>\u786E\u5B9A\u6D88\u606F\u8FB9\u754C</strong>\u3002\u9996\u5148\u6211\u4EEC\u9700\u8981\u660E\u767D\u4EC0\u4E48\u662F\u6D88\u606F\uFF0C\u5728\u6211\u8BA4\u4E3A\uFF0C\u6D88\u606F\u5C31\u662F\u4E00\u6BB5\u6709\u610F\u4E49\u7684\u4FE1\u606F\u62A5\u6587\uFF0C\u4F8B\u5982\u4E00\u6B21 HTTP \u8BF7\u6C42\u6216\u8005\u50CF\u6211\u4EEC\u4E0A\u9762\u4EE3\u7801\u4E2D\u6240\u8981\u53D1\u9001\u7684 <code>Hello World! This is a test demo.</code>\u3002</p><p>\u6240\u4EE5\u6211\u4EEC\u8981\u627E\u5230\u6D88\u606F\u8FB9\u754C\uFF0C\u8FD9\u5E76\u4E0D\u96BE\u7406\u89E3\uFF0C\u786E\u5B9A\u6D88\u606F\u8FB9\u754C\u5C31\u662F\u786E\u5B9A\u6D88\u606F\u7684\u5F00\u59CB\u6216\u8005\u7ED3\u675F\u3002\u7B80\u5355\u5730\u8BF4\uFF0C\u5C31\u4E09\u4E2A\u529E\u6CD5\uFF1A</p><ul><li>\u5B9A\u957F\u6D88\u606F\uFF1A\u534F\u8BAE\u63D0\u524D\u7EA6\u5B9A\u597D\u5305\u7684\u957F\u5EA6\u4E3A\u591A\u5C11\uFF0C\u6BCF\u5F53\u63A5\u6536\u7AEF\u63A5\u6536\u5230\u56FA\u5B9A\u957F\u5EA6\u7684\u5B57\u8282\u5C31\u786E\u5B9A\u4E00\u4E2A\u5305\uFF1B</li><li>\u6D88\u606F\u5206\u9694\u7B26\uFF1A\u5229\u7528\u7279\u6B8A\u7B26\u53F7\u6807\u5FD7\u7740\u6D88\u606F\u7684\u5F00\u59CB\u6216\u8005\u7ED3\u675F\uFF0C\u4F8B\u5982 HTTP \u534F\u8BAE\u4E2D\u7684\u6362\u884C\u7B26\uFF1B</li><li>\u957F\u5EA6\u524D\u7F00\uFF1A\u5148\u53D1\u9001N\u4E2A\u5B57\u8282\u4EE3\u8868\u5305\u7684\u5927\u5C0F\uFF08\u6CE8\u610F\u5927\u7AEF\u548C\u5C0F\u7AEF\u95EE\u9898\uFF09\uFF0C\u540E\u7EED\u89E3\u6790\u4E5F\u6309\u957F\u5EA6\u8BFB\u53D6\u89E3\u6790\u3002</li></ul><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>\u603B\u7ED3\u4E00\u4E0B\u8FD9\u4E09\u4E2A\u65B9\u6CD5\uFF0C\u5176\u5B9E\u5C31\u662F\u4E00\u4E2A<strong>\u5C01\u5305</strong>\u95EE\u9898\u3002</p><blockquote><p>\u5C01\u5305\u5C31\u662F\u7ED9\u4E00\u6BB5\u6570\u636E\u52A0\u4E0A\u5305\u5934\uFF0C\u8FD9\u6837\u4E00\u6765\u6570\u636E\u5305\u5C31\u5206\u4E3A\u5305\u5934\u548C\u5305\u4F53\u4E24\u90E8\u5206\u5185\u5BB9\u4E86(\u8FC7\u6EE4\u975E\u6CD5\u5305\u65F6\u5C01\u5305\u4F1A\u52A0\u5165\u201D\u5305\u5C3E\u201D\u5185\u5BB9)\u3002\u5305\u5934\u90E8\u5206\u7684\u957F\u5EA6\u662F\u56FA\u5B9A\u7684\uFF0C\u5E76\u4E14\u5B83\u5B58\u50A8\u4E86\u5305\u4F53\u7684\u957F\u5EA6\uFF0C\u6839\u636E\u5305\u5934\u957F\u5EA6\u56FA\u5B9A\u4EE5\u53CA\u5305\u5934\u4E2D\u542B\u6709\u5305\u4F53\u957F\u5EA6\u7684\u53D8\u91CF\u5C31\u80FD\u6B63\u786E\u7684\u62C6\u5206\u51FA\u4E00\u4E2A\u5B8C\u6574\u7684\u6570\u636E\u5305\u3002</p></blockquote></div><h3 id="\u57FA\u4E8E\u957F\u5EA6\u524D\u7F00\u8FDB\u884C\u5C01\u5305\u3002" tabindex="-1"><a class="header-anchor" href="#\u57FA\u4E8E\u957F\u5EA6\u524D\u7F00\u8FDB\u884C\u5C01\u5305\u3002" aria-hidden="true">#</a> \u57FA\u4E8E\u957F\u5EA6\u524D\u7F00\u8FDB\u884C\u5C01\u5305\u3002</h3><p>\u6211\u4EEC\u53EF\u4EE5\u81EA\u5DF1\u5B9A\u4E49\u4E00\u4E2A\u534F\u8BAE\uFF0C\u6BD4\u5982\u6570\u636E\u5305\u7684\u524D4\u4E2A\u5B57\u8282\u4E3A\u5305\u5934\uFF0C\u91CC\u9762\u5B58\u50A8\u7684\u662F\u53D1\u9001\u7684\u6570\u636E\u7684\u957F\u5EA6\u3002</p>',11),An={class:"custom-container details"},In=n("div",{class:"language-go ext-go line-numbers-mode"},[n("pre",{class:"language-go"},[n("code",null,[n("span",{class:"token keyword"},"package"),s(` proto

`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"("),s(`
	`),n("span",{class:"token string"},'"bufio"'),s(`
	`),n("span",{class:"token string"},'"bytes"'),s(`
	`),n("span",{class:"token string"},'"encoding/binary"'),s(`
`),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token comment"},"// Encode \u5C06\u6D88\u606F\u7F16\u7801"),s(`
`),n("span",{class:"token keyword"},"func"),s(),n("span",{class:"token function"},"Encode"),n("span",{class:"token punctuation"},"("),s("message "),n("span",{class:"token builtin"},"string"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]"),n("span",{class:"token builtin"},"byte"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token builtin"},"error"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
	`),n("span",{class:"token comment"},"// \u8BFB\u53D6\u6D88\u606F\u7684\u957F\u5EA6\uFF0C\u8F6C\u6362\u6210int32\u7C7B\u578B\uFF08\u53604\u4E2A\u5B57\u8282\uFF09"),s(`
	`),n("span",{class:"token keyword"},"var"),s(" length "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"int32"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"len"),n("span",{class:"token punctuation"},"("),s("message"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
	`),n("span",{class:"token keyword"},"var"),s(" pkg "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"new"),n("span",{class:"token punctuation"},"("),s("bytes"),n("span",{class:"token punctuation"},"."),s("Buffer"),n("span",{class:"token punctuation"},")"),s(`
	`),n("span",{class:"token comment"},"// \u5199\u5165\u6D88\u606F\u5934"),s(`
	err `),n("span",{class:"token operator"},":="),s(" binary"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Write"),n("span",{class:"token punctuation"},"("),s("pkg"),n("span",{class:"token punctuation"},","),s(" binary"),n("span",{class:"token punctuation"},"."),s("LittleEndian"),n("span",{class:"token punctuation"},","),s(" length"),n("span",{class:"token punctuation"},")"),s(`
	`),n("span",{class:"token keyword"},"if"),s(" err "),n("span",{class:"token operator"},"!="),s(),n("span",{class:"token boolean"},"nil"),s(),n("span",{class:"token punctuation"},"{"),s(`
		`),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token boolean"},"nil"),n("span",{class:"token punctuation"},","),s(` err
	`),n("span",{class:"token punctuation"},"}"),s(`
	`),n("span",{class:"token comment"},"// \u5199\u5165\u6D88\u606F\u5B9E\u4F53"),s(`
	err `),n("span",{class:"token operator"},"="),s(" binary"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Write"),n("span",{class:"token punctuation"},"("),s("pkg"),n("span",{class:"token punctuation"},","),s(" binary"),n("span",{class:"token punctuation"},"."),s("LittleEndian"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]"),n("span",{class:"token function"},"byte"),n("span",{class:"token punctuation"},"("),s("message"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
	`),n("span",{class:"token keyword"},"if"),s(" err "),n("span",{class:"token operator"},"!="),s(),n("span",{class:"token boolean"},"nil"),s(),n("span",{class:"token punctuation"},"{"),s(`
		`),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token boolean"},"nil"),n("span",{class:"token punctuation"},","),s(` err
	`),n("span",{class:"token punctuation"},"}"),s(`
	`),n("span",{class:"token keyword"},"return"),s(" pkg"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Bytes"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token boolean"},"nil"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"// Decode \u89E3\u7801\u6D88\u606F"),s(`
`),n("span",{class:"token keyword"},"func"),s(),n("span",{class:"token function"},"Decode"),n("span",{class:"token punctuation"},"("),s("reader "),n("span",{class:"token operator"},"*"),s("bufio"),n("span",{class:"token punctuation"},"."),s("Reader"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token builtin"},"string"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token builtin"},"error"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
	`),n("span",{class:"token comment"},"// \u8BFB\u53D6\u6D88\u606F\u7684\u957F\u5EA6"),s(`
	lengthByte`),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token boolean"},"_"),s(),n("span",{class:"token operator"},":="),s(" reader"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Peek"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"4"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token comment"},"// \u8BFB\u53D6\u524D4\u4E2A\u5B57\u8282\u7684\u6570\u636E"),s(`
	lengthBuff `),n("span",{class:"token operator"},":="),s(" bytes"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"NewBuffer"),n("span",{class:"token punctuation"},"("),s("lengthByte"),n("span",{class:"token punctuation"},")"),s(`
	`),n("span",{class:"token keyword"},"var"),s(" length "),n("span",{class:"token builtin"},"int32"),s(`
	err `),n("span",{class:"token operator"},":="),s(" binary"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Read"),n("span",{class:"token punctuation"},"("),s("lengthBuff"),n("span",{class:"token punctuation"},","),s(" binary"),n("span",{class:"token punctuation"},"."),s("LittleEndian"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token operator"},"&"),s("length"),n("span",{class:"token punctuation"},")"),s(`
	`),n("span",{class:"token keyword"},"if"),s(" err "),n("span",{class:"token operator"},"!="),s(),n("span",{class:"token boolean"},"nil"),s(),n("span",{class:"token punctuation"},"{"),s(`
		`),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token string"},'""'),n("span",{class:"token punctuation"},","),s(` err
	`),n("span",{class:"token punctuation"},"}"),s(`
	`),n("span",{class:"token comment"},"// Buffered\u8FD4\u56DE\u7F13\u51B2\u4E2D\u73B0\u6709\u7684\u53EF\u8BFB\u53D6\u7684\u5B57\u8282\u6570\u3002"),s(`
	`),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token function"},"int32"),n("span",{class:"token punctuation"},"("),s("reader"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Buffered"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"<"),s(" length"),n("span",{class:"token operator"},"+"),n("span",{class:"token number"},"4"),s(),n("span",{class:"token punctuation"},"{"),s(`
		`),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token string"},'""'),n("span",{class:"token punctuation"},","),s(` err
	`),n("span",{class:"token punctuation"},"}"),s(`

	`),n("span",{class:"token comment"},"// \u8BFB\u53D6\u771F\u6B63\u7684\u6D88\u606F\u6570\u636E"),s(`
	pack `),n("span",{class:"token operator"},":="),s(),n("span",{class:"token function"},"make"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]"),n("span",{class:"token builtin"},"byte"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token function"},"int"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"4"),n("span",{class:"token operator"},"+"),s("length"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
	`),n("span",{class:"token boolean"},"_"),n("span",{class:"token punctuation"},","),s(" err "),n("span",{class:"token operator"},"="),s(" reader"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Read"),n("span",{class:"token punctuation"},"("),s("pack"),n("span",{class:"token punctuation"},")"),s(`
	`),n("span",{class:"token keyword"},"if"),s(" err "),n("span",{class:"token operator"},"!="),s(),n("span",{class:"token boolean"},"nil"),s(),n("span",{class:"token punctuation"},"{"),s(`
		`),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token string"},'""'),n("span",{class:"token punctuation"},","),s(` err
	`),n("span",{class:"token punctuation"},"}"),s(`
	`),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token function"},"string"),n("span",{class:"token punctuation"},"("),s("pack"),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"4"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token boolean"},"nil"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`


`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br"),n("span",{class:"line-number"},"41"),n("br"),n("span",{class:"line-number"},"42"),n("br"),n("span",{class:"line-number"},"43"),n("br"),n("span",{class:"line-number"},"44"),n("br"),n("span",{class:"line-number"},"45"),n("br"),n("span",{class:"line-number"},"46"),n("br"),n("span",{class:"line-number"},"47"),n("br"),n("span",{class:"line-number"},"48"),n("br"),n("span",{class:"line-number"},"49"),n("br"),n("span",{class:"line-number"},"50"),n("br"),n("span",{class:"line-number"},"51"),n("br")])],-1),Rn=n("div",{class:"language-go ext-go line-numbers-mode"},[n("pre",{class:"language-go"},[n("code",null,[n("span",{class:"token keyword"},"package"),s(` main

`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"("),s(`
	`),n("span",{class:"token string"},'"bufio"'),s(`
	`),n("span",{class:"token string"},'"fmt"'),s(`
	`),n("span",{class:"token string"},'"io"'),s(`
	`),n("span",{class:"token string"},'"net"'),s(`

	`),n("span",{class:"token string"},'"github.com/csDeng/gostudy/01_study/net/tcp/sticky/solution/proto"'),s(`
`),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token keyword"},"func"),s(),n("span",{class:"token function"},"process"),n("span",{class:"token punctuation"},"("),s("conn net"),n("span",{class:"token punctuation"},"."),s("Conn"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
	`),n("span",{class:"token keyword"},"defer"),s(" conn"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Close"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
	reader `),n("span",{class:"token operator"},":="),s(" bufio"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"NewReader"),n("span",{class:"token punctuation"},"("),s("conn"),n("span",{class:"token punctuation"},")"),s(`
	`),n("span",{class:"token keyword"},"for"),s(),n("span",{class:"token punctuation"},"{"),s(`
		`),n("span",{class:"token comment"},"// \u4F7F\u7528\u81EA\u5B9A\u4E49\u7684\u534F\u8BAE\u89E3\u5305"),s(`
		msg`),n("span",{class:"token punctuation"},","),s(" err "),n("span",{class:"token operator"},":="),s(" proto"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Decode"),n("span",{class:"token punctuation"},"("),s("reader"),n("span",{class:"token punctuation"},")"),s(`
		`),n("span",{class:"token keyword"},"if"),s(" err "),n("span",{class:"token operator"},"=="),s(" io"),n("span",{class:"token punctuation"},"."),s("EOF "),n("span",{class:"token punctuation"},"{"),s(`
			`),n("span",{class:"token keyword"},"return"),s(`
		`),n("span",{class:"token punctuation"},"}"),s(`
		`),n("span",{class:"token keyword"},"if"),s(" err "),n("span",{class:"token operator"},"!="),s(),n("span",{class:"token boolean"},"nil"),s(),n("span",{class:"token punctuation"},"{"),s(`
			fmt`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Println"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"decode msg failed, err:"'),n("span",{class:"token punctuation"},","),s(" err"),n("span",{class:"token punctuation"},")"),s(`
			`),n("span",{class:"token keyword"},"return"),s(`
		`),n("span",{class:"token punctuation"},"}"),s(`
		fmt`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Println"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"\u6536\u5230client\u53D1\u6765\u7684\u6570\u636E\uFF1A"'),n("span",{class:"token punctuation"},","),s(" msg"),n("span",{class:"token punctuation"},")"),s(`
	`),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"func"),s(),n("span",{class:"token function"},"main"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`

	listen`),n("span",{class:"token punctuation"},","),s(" err "),n("span",{class:"token operator"},":="),s(" net"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Listen"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"tcp"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"127.0.0.1:30000"'),n("span",{class:"token punctuation"},")"),s(`
	`),n("span",{class:"token keyword"},"if"),s(" err "),n("span",{class:"token operator"},"!="),s(),n("span",{class:"token boolean"},"nil"),s(),n("span",{class:"token punctuation"},"{"),s(`
		fmt`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Println"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"listen failed, err:"'),n("span",{class:"token punctuation"},","),s(" err"),n("span",{class:"token punctuation"},")"),s(`
		`),n("span",{class:"token keyword"},"return"),s(`
	`),n("span",{class:"token punctuation"},"}"),s(`
	`),n("span",{class:"token keyword"},"defer"),s(" listen"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Close"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
	`),n("span",{class:"token keyword"},"for"),s(),n("span",{class:"token punctuation"},"{"),s(`
		conn`),n("span",{class:"token punctuation"},","),s(" err "),n("span",{class:"token operator"},":="),s(" listen"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Accept"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
		`),n("span",{class:"token keyword"},"if"),s(" err "),n("span",{class:"token operator"},"!="),s(),n("span",{class:"token boolean"},"nil"),s(),n("span",{class:"token punctuation"},"{"),s(`
			fmt`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Println"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"accept failed, err:"'),n("span",{class:"token punctuation"},","),s(" err"),n("span",{class:"token punctuation"},")"),s(`
			`),n("span",{class:"token keyword"},"continue"),s(`
		`),n("span",{class:"token punctuation"},"}"),s(`
		`),n("span",{class:"token keyword"},"go"),s(),n("span",{class:"token function"},"process"),n("span",{class:"token punctuation"},"("),s("conn"),n("span",{class:"token punctuation"},")"),s(`
	`),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br"),n("span",{class:"line-number"},"41"),n("br"),n("span",{class:"line-number"},"42"),n("br"),n("span",{class:"line-number"},"43"),n("br"),n("span",{class:"line-number"},"44"),n("br"),n("span",{class:"line-number"},"45"),n("br"),n("span",{class:"line-number"},"46"),n("br")])],-1),Bn=n("div",{class:"language-go ext-go line-numbers-mode"},[n("pre",{class:"language-go"},[n("code",null,[n("span",{class:"token keyword"},"package"),s(` main

`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"("),s(`
	`),n("span",{class:"token string"},'"fmt"'),s(`
	`),n("span",{class:"token string"},'"net"'),s(`

	`),n("span",{class:"token string"},'"github.com/csDeng/gostudy/01_study/net/tcp/sticky/solution/proto"'),s(`
`),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token keyword"},"func"),s(),n("span",{class:"token function"},"main"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
	conn`),n("span",{class:"token punctuation"},","),s(" err "),n("span",{class:"token operator"},":="),s(" net"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Dial"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"tcp"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"127.0.0.1:30000"'),n("span",{class:"token punctuation"},")"),s(`
	`),n("span",{class:"token keyword"},"if"),s(" err "),n("span",{class:"token operator"},"!="),s(),n("span",{class:"token boolean"},"nil"),s(),n("span",{class:"token punctuation"},"{"),s(`
		fmt`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Println"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"dial failed, err"'),n("span",{class:"token punctuation"},","),s(" err"),n("span",{class:"token punctuation"},")"),s(`
		`),n("span",{class:"token keyword"},"return"),s(`
	`),n("span",{class:"token punctuation"},"}"),s(`
	`),n("span",{class:"token keyword"},"defer"),s(" conn"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Close"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
	`),n("span",{class:"token keyword"},"for"),s(" i "),n("span",{class:"token operator"},":="),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},";"),s(" i "),n("span",{class:"token operator"},"<"),s(),n("span",{class:"token number"},"20"),n("span",{class:"token punctuation"},";"),s(" i"),n("span",{class:"token operator"},"++"),s(),n("span",{class:"token punctuation"},"{"),s(`
		msg `),n("span",{class:"token operator"},":="),s(),n("span",{class:"token string"},"`Hello, Hello. How are you?`"),s(`

		`),n("span",{class:"token comment"},"// \u4F7F\u7528\u81EA\u5B9A\u4E49\u7684\u534F\u8BAE\u5C01\u5305"),s(`
		data`),n("span",{class:"token punctuation"},","),s(" err "),n("span",{class:"token operator"},":="),s(" proto"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Encode"),n("span",{class:"token punctuation"},"("),s("msg"),n("span",{class:"token punctuation"},")"),s(`
		`),n("span",{class:"token keyword"},"if"),s(" err "),n("span",{class:"token operator"},"!="),s(),n("span",{class:"token boolean"},"nil"),s(),n("span",{class:"token punctuation"},"{"),s(`
			fmt`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Println"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"encode msg failed, err:"'),n("span",{class:"token punctuation"},","),s(" err"),n("span",{class:"token punctuation"},")"),s(`
			`),n("span",{class:"token keyword"},"return"),s(`
		`),n("span",{class:"token punctuation"},"}"),s(`
		conn`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Write"),n("span",{class:"token punctuation"},"("),s("data"),n("span",{class:"token punctuation"},")"),s(`
	`),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br")])],-1),qn=p(`<p>\u8F93\u51FA\u7ED3\u679C</p><p>client\u6CA1\u6709\u4EFB\u4F55\u7684\u5EF6\u65F6\uFF0Cserver\u6B63\u786E\u63A5\u6536\u6D88\u606F\u3002</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token operator">&gt;</span> <span class="token keyword">go</span> run <span class="token punctuation">.</span>\\server<span class="token punctuation">.</span><span class="token keyword">go</span>
\u6536\u5230client\u53D1\u6765\u7684\u6570\u636E\uFF1A Hello<span class="token punctuation">,</span> Hello<span class="token punctuation">.</span> How are you?
\u6536\u5230client\u53D1\u6765\u7684\u6570\u636E\uFF1A Hello<span class="token punctuation">,</span> Hello<span class="token punctuation">.</span> How are you?
\u6536\u5230client\u53D1\u6765\u7684\u6570\u636E\uFF1A Hello<span class="token punctuation">,</span> Hello<span class="token punctuation">.</span> How are you?
\u6536\u5230client\u53D1\u6765\u7684\u6570\u636E\uFF1A Hello<span class="token punctuation">,</span> Hello<span class="token punctuation">.</span> How are you?
\u6536\u5230client\u53D1\u6765\u7684\u6570\u636E\uFF1A Hello<span class="token punctuation">,</span> Hello<span class="token punctuation">.</span> How are you?
\u6536\u5230client\u53D1\u6765\u7684\u6570\u636E\uFF1A Hello<span class="token punctuation">,</span> Hello<span class="token punctuation">.</span> How are you?
\u6536\u5230client\u53D1\u6765\u7684\u6570\u636E\uFF1A Hello<span class="token punctuation">,</span> Hello<span class="token punctuation">.</span> How are you?
\u6536\u5230client\u53D1\u6765\u7684\u6570\u636E\uFF1A Hello<span class="token punctuation">,</span> Hello<span class="token punctuation">.</span> How are you?
\u6536\u5230client\u53D1\u6765\u7684\u6570\u636E\uFF1A Hello<span class="token punctuation">,</span> Hello<span class="token punctuation">.</span> How are you?
\u6536\u5230client\u53D1\u6765\u7684\u6570\u636E\uFF1A Hello<span class="token punctuation">,</span> Hello<span class="token punctuation">.</span> How are you?
\u6536\u5230client\u53D1\u6765\u7684\u6570\u636E\uFF1A Hello<span class="token punctuation">,</span> Hello<span class="token punctuation">.</span> How are you?
\u6536\u5230client\u53D1\u6765\u7684\u6570\u636E\uFF1A Hello<span class="token punctuation">,</span> Hello<span class="token punctuation">.</span> How are you?
\u6536\u5230client\u53D1\u6765\u7684\u6570\u636E\uFF1A Hello<span class="token punctuation">,</span> Hello<span class="token punctuation">.</span> How are you?
\u6536\u5230client\u53D1\u6765\u7684\u6570\u636E\uFF1A Hello<span class="token punctuation">,</span> Hello<span class="token punctuation">.</span> How are you?
\u6536\u5230client\u53D1\u6765\u7684\u6570\u636E\uFF1A Hello<span class="token punctuation">,</span> Hello<span class="token punctuation">.</span> How are you?
\u6536\u5230client\u53D1\u6765\u7684\u6570\u636E\uFF1A Hello<span class="token punctuation">,</span> Hello<span class="token punctuation">.</span> How are you?
\u6536\u5230client\u53D1\u6765\u7684\u6570\u636E\uFF1A Hello<span class="token punctuation">,</span> Hello<span class="token punctuation">.</span> How are you?
\u6536\u5230client\u53D1\u6765\u7684\u6570\u636E\uFF1A Hello<span class="token punctuation">,</span> Hello<span class="token punctuation">.</span> How are you?
\u6536\u5230client\u53D1\u6765\u7684\u6570\u636E\uFF1A Hello<span class="token punctuation">,</span> Hello<span class="token punctuation">.</span> How are you?
\u6536\u5230client\u53D1\u6765\u7684\u6570\u636E\uFF1A Hello<span class="token punctuation">,</span> Hello<span class="token punctuation">.</span> How are you?
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div>`,3),Kn=p('<h2 id="\u6269\u5C55" tabindex="-1"><a class="header-anchor" href="#\u6269\u5C55" aria-hidden="true">#</a> \u6269\u5C55</h2><h3 id="\u5EF6\u65F6-ack-\u4E0E-nagle-\u7B97\u6CD5\u7ED3\u5408" tabindex="-1"><a class="header-anchor" href="#\u5EF6\u65F6-ack-\u4E0E-nagle-\u7B97\u6CD5\u7ED3\u5408" aria-hidden="true">#</a> \u5EF6\u65F6 ACK \u4E0E Nagle \u7B97\u6CD5\u7ED3\u5408</h3><p>\u5EF6\u65F6 ACK \u662F\u6307\u63A5\u6536\u7AEF\u4E0D\u4F1A\u6BCF\u4E2A\u5305\u90FD\u53D1\u9001\u4E00\u6B21 ACK \u786E\u8BA4\uFF0C\u800C\u662F\u5F53\u63A5\u6536\u5230\u4E00\u4E2A\u5305\u540E\u5EF6\u8FDF\u4E00\u6BB5\u65F6\u95F4\uFF0C\u4EE5\u671F\u671B\u8FD9\u6BB5\u65F6\u95F4\u5185\u4ECD\u6709\u5305\u88AB\u63A5\u6536\u5230\uFF0C\u8FD9\u662F\u5C31\u53EF\u4EE5\u53EA\u53D1\u9001\u4E00\u6B21 ACK \u786E\u8BA4\u4E4B\u524D\u6536\u5230\u7684\u6570\u636E\u5305\uFF0C\u4EE5\u51CF\u5C11\u7F51\u7EDC\u5E26\u5BBD\u538B\u529B\u3002</p><p>\u4F46\u82E5\u5C06\u5EF6\u65F6 ACK \u4E0E Nagle \u7B97\u6CD5\u76F4\u63A5\u7ED3\u5408\u4F7F\u7528\uFF0C\u5F97\u5230\u7684\u6548\u679C\u53EF\u80FD\u4E0D\u5C3D\u5982\u4EBA\u610F\u3002\u8003\u8651\u4EE5\u4E0B\u60C5\u666F\uFF0C\u5BA2\u6237\u7AEF\u4F7F\u7528\u5EF6\u65F6 ACK \u65B9\u6CD5\u53D1\u9001\u4E00\u4E2A\u5BF9\u670D\u52A1\u5668\u7684\u8BF7\u6C42\uFF0C\u800C\u670D\u52A1\u7AEF\u7684\u54CD\u5E94\u6570\u636E\u5E76\u4E0D\u9002\u5408\u5728\u540C\u4E00\u4E2A\u5305\u4E2D\u4F20\u8F93\uFF0C\u5982\u4E0B\u56FE\u6240\u793A\uFF1A</p><p><img src="'+d+'" alt="img"></p><p>\u4ECE\u56FE\u4E2D\u53EF\u4EE5\u770B\u5230\uFF0C\u5728\u63A5\u6536\u5230\u6765\u81EA\u670D\u52A1\u5668\u7AEF\u7AEF\u4E24\u4E2A\u5305\u4EE5\u540E\uFF0C\u5BA2\u6237\u7AEF\u5E76\u4E0D\u7ACB\u5373\u53D1\u9001 ACK\uFF0C\u800C\u662F\u5904\u4E8E\u7B49\u5F85\u72B6\u6001\uFF0C\u5E0C\u671B\u6709\u6570\u636E\u4E00\u540C\u634E\u5E26\u53D1\u9001\u3002\u901A\u5E38\u60C5\u51B5\u4E0B\uFF0CTCP \u5728\u63A5\u6536\u5230\u4E24\u4E2A\u5168\u957F\u7684\u6570\u636E\u5305\u540E\u5C31\u5E94\u8FD4\u56DE\u4E00\u4E2A ACK\uFF0C\u4F46\u8FD9\u91CC\u5E76\u975E\u5982\u6B64\u3002\u5728\u670D\u52A1\u5668\u7AEF\uFF0C\u7531\u4E8E\u4F7F\u7528\u4E86 Nagle \u7B97\u6CD5\uFF0C\u76F4\u5230\u6536\u5230 ACK \u524D\u90FD\u4E0D\u80FD\u53D1\u9001\u65B0\u6570\u636E\uFF0C\u56E0\u4E3A\u4EFB\u4E00\u65F6\u523B\u53EA\u5141\u8BB8\u81F3\u591A\u4E00\u4E2A\u5C0F\u6570\u636E\u5305\u5728\u4F20\u3002\u56E0\u6B64\u5EF6\u65F6 ACK \u4E0E Nagle \u7B97\u6CD5\u7684\u7ED3\u5408\u5BFC\u81F4\u4E86\u67D0\u79CD\u7A0B\u5EA6\u7684\u6B7B\u9501\uFF08\u4E24\u7AEF\u4E92\u76F8\u7B49\u5F85\u5BF9\u65B9\u4F5C\u51FA\u884C\u52A8\uFF09\uFF0C\u5F53\u7136\u8FD9\u79CD\u6B7B\u9501\u5E76\u4E0D\u662F\u6C38\u4E45\u7684\uFF0C\u5728\u5EF6\u65F6 ACK \u8BA1\u65F6\u5668\u6216\u8005\u54CD\u5E94\u7AEF\u8D85\u65F6\u4E4B\u540E\uFF0C\u5C06\u4F1A\u5F97\u5230\u89E3\u9664\u3002</p>',6);function En(Fn,Ln){const o=c("RouterLink"),t=c("ExternalLinkIcon"),l=c("CodeGroupItem"),u=c("CodeGroup");return i(),k(b,null,[n("nav",g,[n("ul",null,[n("li",null,[a(o,{to:"#tcp\u7C98\u5305"},{default:e(()=>[h]),_:1}),n("ul",null,[n("li",null,[a(o,{to:"#\u4E3A\u4EC0\u4E48\u4F1A\u51FA\u73B0\u7C98\u5305"},{default:e(()=>[_]),_:1})]),n("li",null,[a(o,{to:"#\u7C98\u5305\u7684\u672C\u8D28"},{default:e(()=>[w]),_:1})]),n("li",null,[a(o,{to:"#\u89E3\u51B3\u529E\u6CD5"},{default:e(()=>[y]),_:1}),n("ul",null,[n("li",null,[a(o,{to:"#\u57FA\u4E8E\u957F\u5EA6\u524D\u7F00\u8FDB\u884C\u5C01\u5305\u3002"},{default:e(()=>[H]),_:1})])])]),n("li",null,[a(o,{to:"#\u6269\u5C55"},{default:e(()=>[C]),_:1}),n("ul",null,[n("li",null,[a(o,{to:"#\u5EF6\u65F6-ack-\u4E0E-nagle-\u7B97\u6CD5\u7ED3\u5408"},{default:e(()=>[v]),_:1})])])])])])])]),P,n("div",T,[x,n("ul",null,[n("li",null,[n("p",null,[n("a",N,[A,a(t)])])]),n("li",null,[n("p",null,[n("a",I,[R,a(t)])])]),n("li",null,[n("p",null,[n("a",B,[q,a(t)])])]),n("li",null,[n("p",null,[n("a",K,[E,a(t)])])])])]),F,L,a(u,null,{default:e(()=>[a(l,{title:"server.go",active:""},{default:e(()=>[D]),_:1}),a(l,{title:"client.go"},{default:e(()=>[G]),_:1})]),_:1}),W,n("details",S,[V,z,n("blockquote",null,[n("p",null,[O,j,n("a",J,[U,a(t)]),M,n("a",Q,[X,a(t)]),Y,n("a",Z,[$,a(t)]),nn,sn,an,n("a",tn,[en,a(t)]),on,n("a",ln,[cn,a(t)]),pn])]),n("blockquote",null,[n("p",null,[un,n("a",rn,[kn,a(t)]),bn,n("a",mn,[dn,a(t)]),fn,n("a",gn,[hn,a(t)]),_n,n("a",wn,[yn,a(t)]),Hn,n("a",Cn,[vn,a(t)]),Pn])]),Tn,xn]),Nn,n("details",An,[a(u,null,{default:e(()=>[a(l,{title:"proto/main.go",active:""},{default:e(()=>[In]),_:1}),a(l,{title:"server.go"},{default:e(()=>[Rn]),_:1}),a(l,{title:"client.go"},{default:e(()=>[Bn]),_:1})]),_:1}),qn]),Kn],64)}var Gn=r(f,[["render",En],["__file","tcp_sticky.html.vue"]]);export{Gn as default};
